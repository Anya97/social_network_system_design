# üìê System Design Social network –¥–ª—è [–∫—É—Ä—Å–∞ –ø–æ System Design](https://balun.courses/courses/system_design)

## üß© –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤ (—Ç–µ–∫—Å—Ç + —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏)
- –£–∫–∞–∑–∞–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
- –õ–∞–π–∫–∏ –∫ –ø–æ—Å—Ç–∞–º
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç–∞–º (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ)
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- –ü–æ–∏—Å–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –º–µ—Å—Ç –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–æ–≤ –ø–æ –º–µ—Å—Ç–∞–º
- –õ–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º, –æ–±—Ä–∞—Ç–Ω—ã–π —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫)
- –õ–µ–Ω—Ç–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–±–∑–æ—Ä –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π)

---

## ‚öôÔ∏è –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### üìà –ê—É–¥–∏—Ç–æ—Ä–∏—è –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

- **DAU**: 10 000 000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–†–µ–≥–∏–æ–Ω**: —Å—Ç—Ä–∞–Ω—ã –°–ù–ì
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–º –≤—Å–µ–≥–¥–∞

### üë• –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –î–µ–π—Å—Ç–≤–∏–µ                         | –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—É—Ç–∫–∏ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | RPS                              |
|----------------------------------|------------------------------------------|----------------------------------|
| –ü–æ—Å—Ç—ã                            | 0.5                                      | `10 000 000 √ó 0.5 / 86400 = 58`  |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏                      | 5                                        | `10 000 000 √ó 5 / 86400 = 579`   |
| –†–µ–∞–∫—Ü–∏–∏ (–ª–∞–π–∫–∏)                  | 15                                       | `10 000 000 √ó 15 / 86400 = 1736` |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–µ–Ω—Ç—ã                   | 5                                        | `10 000 000 √ó 5 / 86400 = 579`   |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–ø–∏—Å–æ–∫                | 1                                        | `10 000 000 √ó 1 / 86400 = 116`   |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–¥ –ø–æ—Å—Ç–æ–º | 5                                        | `10 000 000 √ó 5 / 86400 = 579`   |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–æ–≤                  | 5                                        | `10 000 000 √ó 5 / 86400 = 579`   |


### üåê –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

- –ü—Ä–∏–º–µ—Ä–Ω–æ 10% –æ—Ç DAU ‚Üí `10 000 000 √ó 0.1 = 1 000 000` —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### üßÆ –¢—Ä–∞—Ñ–∏–∫

> –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ —Ä–∞–∑–º–µ—Ä—ã:

- –ü–æ—Å—Ç ‚Äî 600 –ö–ë
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π ‚Äî 5 –ö–ë
- –õ–∞–π–∫ ‚Äî 1 –ö–ë
- –õ–µ–Ω—Ç–∞ ‚Äî 500 –ö–ë
- –ü–æ–¥–ø–∏—Å–∫–∏ ‚Äî 5 –ö–ë

### üì• Write –æ–ø–µ—Ä–∞—Ü–∏–∏:

| –û–ø–µ—Ä–∞—Ü–∏—è    | RPS  | –ú–µ–¥–∏–∞ (KB) | –ú–µ—Ç–∞ (KB) | –ü—Ä–∏–º–µ—Ä–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (MB/s) |
|-------------|------|------------|-----------|---------------------------|
| –ü–æ—Å—Ç—ã       | 58   | 250        | 50        | ~17.4                     |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | 579  | 0          | 5         | ~2.9                      |
| –õ–∞–π–∫–∏       | 1736 | 0          | 1         | ~1.7                      |
| –ü–æ–¥–ø–∏—Å–∫–∏    | 347  | 0          | 1         | ~0.35                     |


### üìñ Read –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ß—Ç–µ–Ω–∏–µ)

| –û–ø–µ—Ä–∞—Ü–∏—è    | RPS | –ú–µ–¥–∏–∞ (KB) | –ú–µ—Ç–∞ (KB) | –û–±—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ (MB/s) |
|-------------|-----|------------|-----------|---------------------|
| –õ–µ–Ω—Ç–∞       | 579 | 2500       | 500       | ~1737               |
| –ü–æ—Å—Ç—ã       | 579 | 500        | 100       | ~349                |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | 579 | 0          | 500       | ~290                |
| –ü–æ–¥–ø–∏—Å–∫–∏    | 116 | 0          | 5         | ~0.6                |


---

## üìñ –û—Ü–µ–Ω–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

### –ö–∞—Ä—Ç–∏–Ω–∫–∏

> –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å S3.

**Capacity**:  
`14.5 MB/s √ó 86‚ÄØ400 √ó 365 ‚âà 457 TB`

**HDD-–¥–∏—Å–∫–∏:**

- –¢—Ä–µ–±—É–µ–º—ã–π IOPS: `58 + 579 + 579 = 1216`
- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `457 TB / 2 TB = 228.5`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `(14.5 + 289.5 + 1447.5) MB/s / 100 MB/s = 17.5`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `1216 / 100 = 12.2`
- **–ò—Ç–æ–≥–æ**: `229 HDD-–¥–∏—Å–∫–æ–≤ –ø–æ 2 –¢–ë`

**SSD-–¥–∏—Å–∫–∏ (SATA):**

- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `457 TB / 5 TB = 91.4`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `(14.5 + 289.5 + 1447.5) MB/s / 500 MB/s = 3.5`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `1216 / 1000 = 1.2`
- **–ò—Ç–æ–≥–æ**: `92 SSD-–¥–∏—Å–∫–∞ –ø–æ 5 –¢–ë`

**–ë—É–¥–µ–º –æ—Ö–ª–∞–∂–¥–∞—Ç—å 80% –Ω–∞ HDD, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–∫–æ–ª–µ–Ω–∏—è**

**SSD- 91.4 –¢–ë**

- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `91.4 TB / 5 TB = 19`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `350 MB/s / 500 MB/s = 1`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `243 / 1000 = 1`
- **–ò—Ç–æ–≥–æ**: `19 SSD-–¥–∏—Å–∫–∞ –ø–æ 5 –¢–ë`

**HDD - 365.6 –¢–ë**

- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `365.6 TB / 20 TB = 19`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `1400 MB/s / 100 MB/s = 14`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `972 / 100 = 10`
- **–ò—Ç–æ–≥–æ**: `19 HDD-–¥–∏—Å–∫–∞ –ø–æ 5 –¢–ë`


‚úÖ –í—ã–±–æ—Ä: **19 SSD(SATA) –¥–∏—Å–∫–æ–≤ –ø–æ 5 –¢–ë –∏ 19 HHD –¥–∏—Å–∫–æ–≤ –ø–æ 20 –¢–ë**

---

### –ü–æ—Å—Ç—ã (–º–µ—Ç–∞)

**Capacity**:  
`2.9 MB/s √ó 86‚ÄØ400 √ó 365 ‚âà 92.5 TB`

**SSD-–¥–∏—Å–∫–∏ (SATA):**

- –¢—Ä–µ–±—É–µ–º—ã–π IOPS: `1216`
- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `92.5 TB / 5 TB = 18.5`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `(2.9 + 57.9 + 289.5) MB/s / 500 MB/s = 0.7`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `1216 / 1000 = 1.2`
- **–ò—Ç–æ–≥–æ**: `19 SSD-–¥–∏—Å–∫–æ–≤ –ø–æ 5 –¢–ë`

‚úÖ –í—ã–±–æ—Ä: **19 SSD(SATA) –¥–∏—Å–∫–æ–≤ –ø–æ 5 –¢–ë**

---

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

**Capacity**:  
`2.9 MB/s √ó 86‚ÄØ400 √ó 365 ‚âà 9 TB`

**HDD-–¥–∏—Å–∫–∏:**

- –¢—Ä–µ–±—É–µ–º—ã–π IOPS: `579 + 579 = 1158`
- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `9 TB / 2 TB = 5`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `(2.9 + 290) MB/s / 100 MB/s = 3`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `1158 / 100 = 11.6`
- **–ò—Ç–æ–≥–æ**: `12 HDD-–¥–∏—Å–∫–æ–≤ –ø–æ 2 –¢–ë`

**SSD-–¥–∏—Å–∫–∏ (SATA):**

- –¢—Ä–µ–±—É–µ–º—ã–π IOPS: `1158`
- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `9 TB / 2 TB = 5`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `(2.9 + 290) MB/s / 500 MB/s = 1`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `1158 / 1000 = 1.2`
- **–ò—Ç–æ–≥–æ**: `5 SSD-–¥–∏—Å–∫–æ–≤ –ø–æ 2 –¢–ë`

‚úÖ –í—ã–±–æ—Ä: **5 HDD-–¥–∏—Å–∫–∞ –ø–æ 2 –¢–ë**

---

### –õ–∞–π–∫–∏

**Capacity**:  
`1.7 MB/s √ó 86‚ÄØ400 √ó 365 ‚âà 5 TB`

**HDD-–¥–∏—Å–∫–∏:**

- –¢—Ä–µ–±—É–µ–º—ã–π IOPS: `1736`
- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `5 TB / 2 TB = 2.5`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `1.7 MB/s / 100 MB/s = 0.017`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `1736 / 100 = 17.4`
- **–ò—Ç–æ–≥–æ**: `18 HDD-–¥–∏—Å–∫–æ–≤ –ø–æ 2 –¢–ë`

**SSD-–¥–∏—Å–∫–∏ (SATA):**

- –¢—Ä–µ–±—É–µ–º—ã–π IOPS: `1736`
- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `5 TB / 2 TB = 3`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `1.7 MB/s / 500 MB/s = 0.7`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `1736 / 1000 = 2`
- **–ò—Ç–æ–≥–æ**: `3 SSD-–¥–∏—Å–∫–∞ –ø–æ 2 –¢–ë`

‚úÖ –í—ã–±–æ—Ä: **3 SSD –¥–∏—Å–∫–∞ –ø–æ 2 –¢–ë**

---

### –ü–æ–¥–ø–∏—Å–∫–∏

**Capacity**:  
`0.35 MB/s √ó 86‚ÄØ400 √ó 365 ‚âà 1.1 TB`

**HDD-–¥–∏—Å–∫–∏:**

- –¢—Ä–µ–±—É–µ–º—ã–π IOPS: `463`
- –î–∏—Å–∫–æ–≤ –ø–æ —ë–º–∫–æ—Å—Ç–∏: `1.1 TB / 2 TB = 0.6`
- –î–∏—Å–∫–æ–≤ –ø–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: `(0.6 + 0.35) MB/s / 100 MB/s = 0.01`
- –î–∏—Å–∫–æ–≤ –ø–æ IOPS: `463 / 100 = 4.7`
- **–ò—Ç–æ–≥–æ**: `5 HDD-–¥–∏—Å–∫–æ–≤ –ø–æ 2 –¢–ë`

‚úÖ –í—ã–±–æ—Ä: **5 HDD-–¥–∏—Å–∫–∞ –ø–æ 2 –¢–ë**

---

### ‚è± –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –û–ø–µ—Ä–∞—Ü–∏—è         | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ |
|------------------|---------------------------|
| –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ | ‚â§ 1.5 —Å–µ–∫—É–Ω–¥—ã             |
| –õ–∞–π–∫             | ‚â§ 1 —Å–µ–∫—É–Ω–¥–∞               |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π      | ‚â§ 1 —Å–µ–∫—É–Ω–¥                |
| –õ–µ–Ω—Ç–∞            | ‚â§ 1 —Å–µ–∫—É–Ω–¥–∞               |

---

### üõ° –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

- 99.99%

---

### üîí –õ–∏–º–∏—Ç—ã

- –ú–∞–∫—Å–∏–º—É–º –ø–æ–¥–ø–∏—Å–æ–∫ —É –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: **1 000 000**
